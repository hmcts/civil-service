plugins {
  id 'application'
  // id 'checkstyle'
  // id 'jacoco'
  id 'io.spring.dependency-management' version '1.0.12.RELEASE'
  id 'org.springframework.boot' version '2.5.14'
  id 'org.owasp.dependencycheck' version '8.1.2'
  id 'com.github.ben-manes.versions' version '0.43.0'
  id 'org.sonarqube' version '3.4.0.2513'
  id 'au.com.dius.pact' version '4.2.14'
  id "io.freefair.lombok" version "5.3.3.3"
  id "org.flywaydb.flyway" version "9.0.1"
  id 'net.ltgt.apt' version '0.21'
  id 'hmcts.ccd.sdk' version '5.2.4'
}

group = 'uk.gov.hmcts.reform'
version = '0.0.1'

ccd {
  configDir = file('build/ccd-definition')
}
//sourceCompatibility = '19'

allprojects {

  apply plugin: 'java'
  apply plugin: 'io.spring.dependency-management'
  apply plugin: 'org.springframework.boot'
  apply plugin: 'org.owasp.dependencycheck'
  apply plugin: 'com.github.ben-manes.versions'
  apply plugin: 'net.ltgt.apt'

  repositories {
    mavenLocal()
    mavenCentral()
    maven {
      url "https://jitpack.io"
    }
    maven {
      url "https://repo.spring.io/libs-milestone"
    }
   jcenter()
  }

  dependencyManagement {
    dependencies {

      dependency group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.13.4.2'
      dependency group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.14.2'
    }

    imports {
      mavenBom 'org.springframework.cloud:spring-cloud-dependencies:2020.0.6'
    }
  }

  dependencies {
    implementation 'org.springframework.boot:spring-boot-starter'
    implementation 'com.fasterxml.jackson.core:jackson-databind'
    implementation 'com.fasterxml.jackson.core:jackson-core'
    implementation 'com.fasterxml.jackson.core:jackson-annotations'
    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'

    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-web'
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-actuator'
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-aop'
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-json'
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-validation'
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-jdbc'

    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-cache'
    testImplementation group: 'org.springframework.boot', name: 'spring-boot-starter-test'
    implementation group: 'com.github.hmcts', name: 'ccd-client', version: '4.9.1'
    implementation group: 'org.springframework.cloud', name: 'spring-cloud-starter-openfeign', version: '3.1.6'
    implementation group: 'org.springframework.cloud', name: 'spring-cloud-openfeign-core', version: '3.1.6'
    implementation group: 'io.github.openfeign', name: 'feign-httpclient', version: '11.10'

    implementation group: 'org.postgresql', name: 'postgresql', version: '42.4.3'
    implementation group: 'com.fasterxml.jackson.module', name: 'jackson-module-kotlin', version: '2.14.2'
    implementation group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-jsr310', version: '2.14.2'

    //implementation group: 'io.github.openfeign', name: 'feign-httpclient', version: '11.10'
    //implementation group: 'io.github.openfeign', name: 'feign-jackson', version: '4.9.1'
    implementation group: 'io.github.openfeign', name: 'feign-jackson', version: '11.10'



    // Provides fast-reload of just the NFDIV service.
    implementation 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
  }

/*
reloadCcd.configure {
	dependsOn assemble, generateCCDConfig
}

generateCCDConfig.dependsOn stopCosApiContainer
task buildCCDXlsx(type: Exec, dependsOn: generateCCDConfig) {
	group 'ccd tasks'
	commandLine './bin/ccd-build-definition.sh'
	inputs.dir layout.buildDirectory.dir('definitions')
	outputs.dir layout.buildDirectory.dir('ccd-config')
}*/


}
